<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Test</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/emote.css">
    <link rel="stylesheet" href="css/image-overlay.css">
</head>

<body>

    <nav class="navbar navbar-expand-lg navbar-dark" style="height: 70px; background: url('http://www.citigroup.com/citi/assets/img/brand/citi-blue-bar.jpg') repeat-x;">
        <a href="#" class="navbar-brand mr-auto">
                <img src="img/emoteicons/citi.PNG" alt="Citigroup Inc.">
            </a>
        <p class="navbar-brand my-2">Citi Emote</p>
    </nav>

    <div id="cover">
        <div class="container">
            <div class="custom-row">
                <div class="jumbotron" style="color: black">
                    <div class="">
                        <h1 class="display-3" id="event-name">#Event</h1>
                    </div>
                    <div class="dropdown show" id="dropdown">
                        <a class="btn btn-info dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true"
                            aria-expanded="false">
                    Select your Business Unit
                  </a>

                        <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                            <a class="dropdown-item" href="#" onclick="select(this)">CCET</a>
                            <a class="dropdown-item" href="#" onclick="select(this)">CMOT</a>
                            <a class="dropdown-item" href="#" onclick="select(this)">SST</a>
                        </div>
                    </div>



                    <div class="card" id="emote-card">
                        <!--                <div class="card-header">-->
                        <div class="lead card-header">Enjoying the event? Just let us know how are you feeling right now!</div>
                        <!--                </div>-->
                        <div class="card-body" id="emoji-container">
                            <div class="row sm-auto">
                                <div class="col-4 col-sm-4 col-md-2 emote-btn">
                                    <img class="img-fluid" onclick="submit(this,1)" src="img/emoteicons/emote_0000_1.png" alt="Angry">
                                    <p>Angry</p>
                                </div>
                                <div class="col-4 col-sm-4 col-md-2 emote-btn">
                                    <img class="img-fluid" onclick="submit(this,2)" src="img/emoteicons/emote_0001_2.png" alt="Sad">
                                    <p>Sad</p>
                                </div>
                                <!-- <div class="col-4 col-sm-4 col-md-2 emote-btn">
                                    <a href="#" onclick="submit(this,3)"><img class="img-fluid" src="img/emoteicons/emote_0002_3.png" alt="Neutral"></a>
                                    <p>Neutral</p>
                                </div> -->
                                <div class="col-4 col-sm-4 col-md-2 emote-btn">
                                    <img class="img-fluid" onclick="submit(this,3)" src="img/emoteicons/emote_0003_4.png" alt="Happy">
                                    <p>Happy</p>
                                </div>
                                <div class="col-4 col-sm-4 col-md-2 emote-btn">
                                    <img class="img-fluid" onclick="submit(this,4)" src="img/emoteicons/emote_0004_5.png" alt="Very Happy">
                                    <p>Very Happy</p>
                                </div>
                                <div class="col-4 col-sm-4 col-md-2 emote-btn">
                                    <img class="img-fluid" onclick="submit(this,5)" src="img/emoteicons/emote_0005_6.png" alt="Awesome" style="margin-top: 5px">
                                    <p>Awesome</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="experience-section">
                    </div>
                    <div id="comment-section">
                        <!-- <div class="card">
                            <div class="form-group">
                                <div class="lead card-header" for="comment-textarea">Comments</div>
                                <textarea class="form-control form-control-lg" id="comment-textarea" rows="3"></textarea>
                            </div>
                        </div> -->
                    </div>
                    <div id="submit-section">
                        <button class="btn btn-primary" id="submit-survey" onClick="submitSurvey()" type="button" disabled="disabled">Submit</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <style>
        .arya-format {
            margin-top: 24px;
            margin-bottom: 10px;
        }

        .arya-format button.btn {
            padding: 5px 10px;
            margin: 0 0 4px 0;
        }

        .shashwat-format .card-header {
            background: none;
        }

        .shashwat-format p {
            margin-bottom: 0;
        }

        .shashwat-format {
            border: none;
            border-right: 1px #cfcfcf solid;
            border-radius: 0;
        }

        .shashwat-format:last-child {
            border: none;
        }

    </style>
    <script src="js/popper.min.js"></script>
    <script src="js/jquery-3.2.1.min.js"></script>
    <script src="js/bootstrap.js"></script>
    <script>
        var response = {
            "timestamp": null,
            "eventHash": null,
            "moodCode": null,
            "improvement": null,
            "uniqueId": null,
            "bu": null,
            "tagId": null,
            "tags": null,
            "comments": null
        };
        var tagLibrary = {
            "negative": ["Manager", "Teammate", "Work-life Balance", "Opportunities", "Culture"],
            "neutral": ["Tech Stack", "Flexibility", "Environment", "Infrastructure", "Culture"],
            "positive": ["Manager", "Team", "Work", "Culture"]
        }
        var buName = document.getElementById("dropdownMenuLink");
        var eventHash = document.getElementById("event-name");
        var select = function (e) {
            buName.innerHTML = e.innerHTML;
        };
        var submit = function (e, val) {
            response.moodCode = val.toString();
            response.timestamp = (new Date).toJSON();
            // console.log(response);
            fetchData(val);
            $('#experience-section').html(experienceHtml);
            $('#comment-section').html(commentSection);
            document.getElementById('submit-survey').disabled=false;
            //console.log(document.getElementById('submit-survey'));
        };

        var experienceHtml;
        var fetchData = function (val) {
            experienceHtml = '<div class="card ">';
            switch (val) {
                case 1:
                case 2:
                    experienceHtml += '<div class="lead card-header">What went wrong??</div>';
                    experienceHtml += '<div class="input-btn-group arya-format">';
                    var colorClass = "danger";
                    tagLibrary["negative"].forEach(function (item, index) {
                        populateTags(colorClass, item, index);
                    });
                    response.tagId = '1';
                    break;
                case 3:
                case 4:
                    experienceHtml += '<div class="lead card-header">What could be improved??</div>';
                    experienceHtml += '<div class="input-btn-group arya-format">';
                    colorClass = "secondary";
                    tagLibrary["neutral"].forEach(function (item, index) {
                        populateTags(colorClass, item, index);
                    });
                    response.tagId = '2';
                    break;
                case 5:
                    experienceHtml += '<div class="lead card-header">What was awesome??</div>';
                    experienceHtml += '<div class="input-btn-group arya-format">';
                    colorClass = "success";
                    tagLibrary["positive"].forEach(function (item, index) {
                        populateTags(colorClass, item, index);
                    });
                    response.tagId = '3';
                    break;
            }

        };
        var selectTag = function (e) {
            e.classList.contains('active') ? e.classList.remove('active') : e.classList.add("active");
        };
        var populateTags = function (colorClass, item, index) {
            experienceHtml += '<button type="button" onclick="selectTag(this)" class="btn btn-lg btn-outline-'+colorClass+' tag">' + item + '</button>';
        };

        var commentSection = '<div class="card"><div class="form-group">';
        commentSection += '<div class="lead card-header" for="comment-textarea">Comments</div>';
        commentSection += '<textarea class="form-control form-control-lg" id="comment-textarea" rows="3"></textarea></div></div>';

        var submitSurvey = function () {
            var tagArr = [];
            var tags = document.getElementsByClassName('tag');
            for (i = 0; i < tags.length; i++) {
                if (tags[i].classList.contains('active')) {
                    tagArr.push(tags[i].innerHTML);
                }
            }
            response.tags = tagArr;
            response.bu = buName.innerHTML;
            response.eventHash = eventHash.innerHTML;
            response.comments = document.getElementById("comment-textarea").value;
            console.log(response);
        }
    </script>
</body>

</html>